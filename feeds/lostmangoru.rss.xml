<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>blog.gorugle.org</title><link>/</link><description></description><atom:link href="/feeds/lostmangoru.rss.xml" rel="self"></atom:link><lastBuildDate>Mon, 21 Jul 2014 17:49:00 +0900</lastBuildDate><item><title>AquesTalk pico LSIの動作確認</title><link>/posts/2014/07/aquestalk.html</link><description>&lt;p&gt;以前購入していた&lt;a href="http://www.a-quest.com/products/aquestalkpicolsi.html"&gt;ATP3011F1-PU&lt;/a&gt;(&lt;a href="http://akizukidenshi.com/catalog/g/gI-06220/"&gt;秋月&lt;/a&gt;で850円)の動作確認をしてみました&lt;br/&gt;
紹介動画にもありますがArduino UNOに挿してアンプ付きのスピーカと接続、&lt;br/&gt;
PCからシリアルモニタで文字を送信するだけで音声を出すことができます&lt;br/&gt;
(技術資料 13.4. Arduinoボードを利用した簡易動作 を参照)&lt;br/&gt;
通常Arduinoから使う場合はI2C接続で使うことになると思いますが、&lt;br/&gt;
I2C接続は後日試すとして今回はこの方法で動作確認をしてみました&lt;/p&gt;
&lt;p&gt;まずうちにはアンプ付きのスピーカなんて無いのでそれを用意するところから&lt;br/&gt;
せっかくなのでこれも秋月で買ってきて組み立ててみました&lt;br/&gt;
といっても個別にパーツを揃えたわけでなく&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://akizukidenshi.com/catalog/g/gK-08217/"&gt;ＰＡＭ８０１２使用２ワットＤ級アンプモジュール&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://akizukidenshi.com/catalog/g/gK-05363/"&gt;３．５ｍｍステレオミニジャックＤＩＰ化キット&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://akizukidenshi.com/catalog/g/gP-02679/"&gt;電池ボックス　単３×２本（リード線・耳付）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;100均で売っているスピーカ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;これらを接続しただけです&lt;br/&gt;
今回試した手順を以下にまとめておきます&lt;br/&gt;
後半は技術資料に書いてあるものそのままで、どちらかと言うと前半が僕には必要でした&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ArduinoのLSIを取り外し、AquesTalkを取り付け&lt;/li&gt;
&lt;li&gt;Arduinoのデジタル6番をアンプのIN+に接続&lt;/li&gt;
&lt;li&gt;ArduinoのGNDをアンプのIN-に接続&lt;/li&gt;
&lt;li&gt;アンプの+VとGNDをそれぞれ電池に接続&lt;/li&gt;
&lt;li&gt;アンプのSPK+とSPK-をジャックのRとGに接続&lt;/li&gt;
&lt;li&gt;ジャックにスピーカを接続&lt;/li&gt;
&lt;li&gt;ArduinoをPCに接続、Arduino IDEを起動&lt;/li&gt;
&lt;li&gt;メニューのTools -&amp;gt; Serial Monitorを開く&lt;/li&gt;
&lt;li&gt;右下のコンボボックスでCarriage returnと9600bpsを選択&lt;/li&gt;
&lt;li&gt;上のインプットボックスに &lt;code&gt;?&lt;/code&gt; を入力してEnter&lt;/li&gt;
&lt;li&gt;&lt;code&gt;konnichiwa&lt;/code&gt; 等を入力してEnterを押すと発声する&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;発声させるためのテキストはデータシートを参照するか、&lt;br/&gt;
&lt;a href="http://www.a-quest.com/demo/pico_kanji2roman.html"&gt;音声記号列生成 Webサービス&lt;/a&gt;を使用して作成します&lt;/p&gt;
&lt;p&gt;&lt;img alt="AquesTalk pico LSI" src="/static/images/2014/07/IMAG1027.jpg" style="width: 3264px; height: auto; max-width: 100%;"/&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">lostman/ごる</dc:creator><pubDate>Mon, 21 Jul 2014 17:49:00 +0900</pubDate><guid>tag:,2014-07-21:posts/2014/07/aquestalk.html</guid><category>Arduino</category><category>AquesTalk pico LSI</category></item><item><title>PhantomJSを使ってみた</title><link>/posts/2014/07/phantomjs.html</link><description>&lt;p&gt;はじめて&lt;a href="http://phantomjs.org/"&gt;PhantomJS&lt;/a&gt;使ってみました&lt;br/&gt;
仕事で間接的に使ったことはありましたが、&lt;br/&gt;
プライベートで使ったのははじめてということでテストも兼ねて記事にしてみます&lt;/p&gt;
&lt;p&gt;なにに使ったかというと&lt;br/&gt;
ドメインの管理ページのDNSの設定の書き換えの自動化です&lt;br/&gt;
このサイトのドメインは&lt;a href="http://www.star-domain.jp/"&gt;スタードメイン&lt;/a&gt;で管理しているのですが、&lt;br/&gt;
ここはDDNSの機能は提供していないんですね&lt;br/&gt;
このサイトはCNAMEを固定で設定できればいいので特に必要はないんですが、&lt;br/&gt;
サブドメインを使って固定IPアドレスでない自宅のマシンにもアクセスできるようにしたかったのです&lt;br/&gt;
ただ手動では面倒なのでできれば何らかの方法で自動的に更新しようと考えました&lt;/p&gt;
&lt;p&gt;一般的には&lt;a href="http://www.mydns.jp/"&gt;MyDNS&lt;/a&gt;等の外部のDDNSの機能を提供しているサービスを使用して&lt;br/&gt;
このドメインで使用しているネームサーバをDDNSが提供しているものに変更するみたいです&lt;br/&gt;
一応この方法も試して動作することも確認しましたが、&lt;br/&gt;
PhantomJSを使って書き換える方法も比較的容易に実現できそうだったのでやってみました&lt;/p&gt;
&lt;p&gt;ソースは&lt;a href="https://github.com/lostman-github/stardomain-ddns"&gt;ここ&lt;/a&gt;に置いてあります&lt;br/&gt;
READMEにも書いてありますが実行方法は以下です&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;phantomjs stardomain-ddns.js &lt;span class="s2"&gt;"&amp;lt;email address&amp;gt;"&lt;/span&gt; &lt;span class="s2"&gt;"&amp;lt;password&amp;gt;"&lt;/span&gt; &lt;span class="s2"&gt;"&amp;lt;file name of DNS records&amp;gt;"&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;メールアドレスとパスワードはログインするために必要なもの&lt;br/&gt;
あとはDNSの設定が書いてあるファイルのファイル名を指定します&lt;br/&gt;
このファイルの中身はスタードメインの管理ページの&lt;br/&gt;
「レコード一括編集(テキストエリア)」のページに表示される形式にしておきます&lt;br/&gt;
なので一度手動で設定しておいて、一括編集の画面からコピペしてファイルを作ると簡単です&lt;br/&gt;
スクリプトを実行すると現在の設定とファイルの中身が一致しなかった場合更新します&lt;/p&gt;
&lt;p&gt;このスクリプトを書くにあたってはまった部分がクリックの操作です&lt;br/&gt;
inputタグのボタンをクリックするには以下のようします&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;funcs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;evaluate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getElementsByName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'action_user_dns_index'&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nx"&gt;click&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;しかし、aタグのリンクをクリックしたい場合はうまくいきません (Firefoxでは上の書き方でも動作するんですよね&lt;br/&gt;
色々調べたら安心と信頼の&lt;a href="http://stackoverflow.com/questions/2705583/how-to-simulate-a-click-with-javascript/2706236#2706236"&gt;Stack Overflow&lt;/a&gt;に書いてあったのでそれを参考にしました&lt;br/&gt;
以下のようにするとクリックイベントを発生させることができました&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;funcs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;evaluate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;elem&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getElementsByClassName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'submenu_04'&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nx"&gt;firstElementChild&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createEvent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Events'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;initEvent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'click'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;elem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;dispatchEvent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">lostman/ごる</dc:creator><pubDate>Sun, 20 Jul 2014 03:30:00 +0900</pubDate><guid>tag:,2014-07-20:posts/2014/07/phantomjs.html</guid><category>JavaScript</category><category>PhantomJS</category></item><item><title>Pelicanはじめました</title><link>/posts/2014/07/pelican.html</link><description>&lt;p&gt;Bloggerでブログを書いていましたが順次こちらへ移行する予定&lt;br/&gt;
このページは&lt;a href="https://pages.github.com/"&gt;Github Pages&lt;/a&gt;に&lt;a href="http://blog.getpelican.com/"&gt;Pelican&lt;/a&gt;で生成したコンテンツを置いています&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">lostman/ごる</dc:creator><pubDate>Sun, 20 Jul 2014 00:10:00 +0900</pubDate><guid>tag:,2014-07-20:posts/2014/07/pelican.html</guid><category>Pelican</category></item></channel></rss>